#TODO fix checksum
#TODO testing

file = "4B 49 54 48 80 00 00 00 00 00 08 00 00 20 00 20 00 00 00 03 00 10 00 20 00 00 00 00 00 00 0C 18 00 00 0C 18 00 00 0C 18 00 00 0C 18 00 00 0C 18 00 00 0C 18 00 00 0C 18 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 06 4B 49 54 30 30 31 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 4B 49 54 49 50 00 00 00 00 00 00 00 00 00 00 08 42 61 73 73 31 20 43 32 00 00 00 00 00 00 00 00 00 00 00 15 00 06 00 00 00 08 00 20 01 02 00 10 02 04 00 10 03 07 00 20 08 24 00 7F 09 00 00 03 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 4B 49 54 49 50 00 00 00 00 00 00 00 00 00 00 08 50 6C 75 63 6B 38 42 74 00 00 00 00 00 00 00 00 11 00 00 15 00 06 00 00 00 07 00 20 01 05 00 10 02 04 00 10 03 04 00 0A 08 25 00 7F 09 00 00 03 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 4B 49 54 49 50 00 00 00 00 00 00 00 00 00 00 08 38 30 38 20 4B 69 63 6B 00 00 00 00 00 00 00 00 01 00 00 15 00 06 00 00 00 06 00 20 01 04 08 10 02 04 08 10 03 02 00 0A 08 26 00 7F 09 00 00 03 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 4B 49 54 49 50 00 00 00 00 00 00 00 00 00 00 08 53 79 6E 74 68 53 74 62 00 00 00 00 00 00 00 00 03 00 00 15 00 06 00 00 00 05 00 20 01 02 00 10 02 04 00 10 03 03 00 0A 08 27 00 7F 09 00 00 03 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 4B 49 54 49 50 00 00 00 00 00 00 00 00 00 00 05 43 72 61 73 68 00 00 00 00 00 00 00 00 00 00 00 0B 00 00 15 00 06 00 00 00 08 00 20 01 04 00 10 02 04 00 10 03 02 00 0A 08 28 00 7F 09 00 00 03 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 4B 49 54 49 50 00 00 00 00 00 00 00 00 00 00 07 38 30 38 20 53 4E 52 00 00 00 00 00 00 00 00 00 0A 00 00 15 00 06 00 00 00 08 00 20 01 04 00 10 02 04 00 10 03 02 00 0A 08 29 00 7F 09 00 00 03 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 4B 49 54 49 50 00 00 00 00 00 00 00 00 00 00 03 48 61 74 00 00 00 00 00 00 00 00 00 00 00 00 00 0C 00 00 15 00 06 00 00 00 08 00 20 01 06 00 10 02 02 00 10 03 04 00 0A 08 2A 00 7F 09 01 00 03 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 4B 49 54 49 50 00 00 00 00 00 00 00 00 00 00 04 43 6C 61 70 00 00 00 00 00 00 00 00 00 00 00 00 13 00 00 15 00 06 00 00 00 08 00 20 01 04 00 10 02 06 00 10 03 03 00 0A 08 2B 00 7F 09 00 00 03 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 4B 49 54 49 50 00 00 00 FF AA 00 00 00 00 00 08 3C 45 6D 70 74 79 3E 20 00 00 00 00 00 00 00 00 00 00 01 00 00 06 00 00 00 08 00 20 01 04 00 10 02 04 00 10 03 02 00 0A 08 24 00 7F 09 00 00 03 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 4B 49 54 49 50 00 00 00 FF AA 00 00 00 00 00 08 3C 45 6D 70 74 79 3E 20 00 00 00 00 00 00 00 00 00 00 01 00 00 06 00 00 00 08 00 20 01 04 00 10 02 04 00 10 03 02 00 0A 08 25 00 7F 09 00 00 03 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 4B 49 54 49 50 00 00 00 FF AA 00 00 00 00 00 08 3C 45 6D 70 74 79 3E 20 00 00 00 00 00 00 00 00 00 00 01 00 00 06 00 00 00 08 00 20 01 04 00 10 02 04 00 10 03 02 00 0A 08 26 00 7F 09 00 00 03 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 4B 49 54 49 50 00 00 00 FF AA 00 00 00 00 00 08 3C 45 6D 70 74 79 3E 20 00 00 00 00 00 00 00 00 00 00 01 00 00 06 00 00 00 08 00 20 01 04 00 10 02 04 00 10 03 02 00 0A 08 27 00 7F 09 00 00 03 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 4B 49 54 49 50 00 00 00 FF AA 00 00 00 00 00 08 3C 45 6D 70 74 79 3E 20 00 00 00 00 00 00 00 00 00 00 01 00 00 06 00 00 00 08 00 20 01 04 00 10 02 04 00 10 03 02 00 0A 08 28 00 7F 09 00 00 03 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 4B 49 54 49 50 00 00 00 FF AA 00 00 00 00 00 08 3C 45 6D 70 74 79 3E 20 00 00 00 00 00 00 00 00 00 00 01 00 00 06 00 00 00 08 00 20 01 04 00 10 02 04 00 10 03 02 00 0A 08 29 00 7F 09 00 00 03 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 4B 49 54 49 50 00 00 00 FF AA 00 00 00 00 00 08 3C 45 6D 70 74 79 3E 20 00 00 00 00 00 00 00 00 00 00 01 00 00 06 00 00 00 08 00 20 01 04 00 10 02 04 00 10 03 02 00 0A 08 2A 00 7F 09 00 00 03 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 4B 49 54 49 50 00 00 00 FF AA 00 00 00 00 00 08 3C 45 6D 70 74 79 3E 20 00 00 00 00 00 00 00 00 00 00 01 00 00 06 00 00 00 08 00 20 01 04 00 10 02 04 00 10 03 02 00 0A 08 2B 00 7F 09 00 00 03 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00"

#A1 00 08 00

array = file.split(' ')

intarray = array

for k in range(0, len(array)):
    intarray[k] = int(array[k], 16)


#print format(array[0], '#04x')

checksum = 0

for i in range(9, len(intarray)):
    checksum = checksum+(intarray[i] & 0xff)
    checksum = checksum & 0xff

print format(checksum, '#04x')

#format(len(sample), '#04x')
